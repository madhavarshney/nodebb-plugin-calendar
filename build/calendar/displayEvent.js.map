{"version":3,"sources":["../../src/calendar/displayEvent.js"],"names":["displayEvent","event","cb","content","uid","app","user","pid","div","$","$display","modal","find","empty","append","attr","RELATIVE_PATH","repeats","day","window","trigger","parsed"],"mappings":";;;;;;AAAA;;AACA;;AAEA,MAAMA,eAAe,CAACC,KAAD,EAAQC,EAAR,KAAe;AAClC,QAAMC,UAAU,8BAAc,EAAEF,YAAF,EAASG,KAAKC,IAAIC,IAAJ,CAASF,GAAvB,EAAd,CAAhB;AACA,QAAMG,MAAMN,MAAMM,GAAlB;;AAEA,QAAMC,MAAMC,EAAEN,OAAF,CAAZ;AACA,QAAMO,WAAWD,EAAE,oCAAF,CAAjB;AACAC,WACGC,KADH,CACS,MADT,EAEGC,IAFH,CAEQ,oBAFR,EAGGC,KAHH,GAIGC,MAJH,CAIUN,GAJV;AAKAE,WACGE,IADH,CACQ,6BADR,EAEGG,IAFH,CAEQ,MAFR,EAEiB,GAAEC,aAAc,SAAQT,GAAI,EAF7C;AAGAG,WACGE,IADH,CACQ,aADR,EAEGG,IAFH,CAEQ,UAFR,EAEoBR,GAFpB;AAGA,MAAIN,MAAMgB,OAAV,EAAmB;AACjBP,aAASE,IAAT,CAAc,YAAd,EAA4BG,IAA5B,CAAiC,UAAjC,EAA6Cd,MAAMiB,GAAnD;AACD;AACDR,WACGC,KADH,CACS,MADT;;AAGA,4BAAU,EAAEJ,QAAF,EAAV,EAAmB,MAAM;AACvBE,MAAEU,MAAF,EAAUC,OAAV,CAAkB,+BAAlB,EAAmD,EAAEb,QAAF,EAAOW,KAAKjB,MAAMiB,GAAlB,EAAuBP,OAAOD,QAA9B,EAAnD;;AAEA,QAAI,OAAOR,EAAP,KAAc,UAAlB,EAA8B;AAC5BA,SAAG,EAAEC,gBAAF,EAAWkB,QAAQpB,KAAnB,EAAH;AACD;AACF,GAND;AAOD,CA9BD;;kBAgCeD,Y","file":"displayEvent.js","sourcesContent":["import { eventTemplate } from '../lib/templates';\r\nimport { setupPost } from '../client/responses';\r\n\r\nconst displayEvent = (event, cb) => {\r\n  const content = eventTemplate({ event, uid: app.user.uid });\r\n  const pid = event.pid;\r\n\r\n  const div = $(content);\r\n  const $display = $('#plugin-calendar-cal-event-display');\r\n  $display\r\n    .modal('hide')\r\n    .find('.modal-body .posts')\r\n    .empty()\r\n    .append(div);\r\n  $display\r\n    .find('.modal-footer a.btn-primary')\r\n    .attr('href', `${RELATIVE_PATH}/post/${pid}`);\r\n  $display\r\n    .find('.modal-body')\r\n    .attr('data-pid', pid);\r\n  if (event.repeats) {\r\n    $display.find('[data-day]').attr('data-day', event.day);\r\n  }\r\n  $display\r\n    .modal('show');\r\n\r\n  setupPost({ pid }, () => {\r\n    $(window).trigger('action:calendar.event.display', { pid, day: event.day, modal: $display });\r\n\r\n    if (typeof cb === 'function') {\r\n      cb({ content, parsed: event });\r\n    }\r\n  });\r\n};\r\n\r\nexport default displayEvent;\r\n"]}