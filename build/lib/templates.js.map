{"version":3,"sources":["../../src/lib/templates.js"],"names":["makeListElement","n","li","eventTemplate","event","isEmail","uid","startDate","endDate","allday","response","responses","responsesTemplate","day","repeats","active","no","maybe","yes","html","name","location","length","description","reminders","sort","a","b","map","join","key","find","x","every","daysOfWeek","days","endDateText","Number","isFinite","mandatory"],"mappings":"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","file":"templates.js","sourcesContent":["const makeListElement = (n) => {\r\n  const li = `<li data-value=\"${n}\">[[moment:time-duration, ${n}]]</li>`;\r\n  return li;\r\n};\r\n\r\nconst eventTemplate = ({ event, isEmail, uid }) => {\r\n  const { startDate, endDate, allday } = event;\r\n\r\n  let response = 'no';\r\n  if (uid && event.responses && event.responses[uid]) {\r\n    response = event.responses[uid];\r\n  }\r\n  const responsesTemplate = () => `\r\n<div class=\"plugin-calendar-event-responses\" data-day=\"${event.day || ''}\">\r\n  <i class=\"fa fa-reply\" aria-hidden=\"true\"></i>\r\n  <div class=\"col-xs-12 col-sm-6\">\r\n    ${event.repeats ? `\r\n    <div class=\"input-group plugin-calendar-event-responses-day\">\r\n      <input class=\"form-control\" title=\"[[calendar:select_day]]\" type=\"text\">\r\n      <span class=\"input-group-addon\">\r\n        <i class=\"fa fa-calendar-check-o\"></i>\r\n      </span>\r\n    </div>\r\n    ` : ''}\r\n    ${uid === 0 ? '' : `\r\n    <div class=\"plugin-calendar-event-responses-user btn-group\">\r\n      ${(() => {\r\n        const active = {\r\n          no: '',\r\n          maybe: '',\r\n          yes: '',\r\n          [response]: 'active',\r\n        };\r\n\r\n        return `\r\n      <button data-value=\"no\" type=\"button\" class=\"btn btn-sm btn-danger ${active.no}\">\r\n        [[calendar:response_no]]\r\n      </button>\r\n      <button data-value=\"maybe\" type=\"button\" class=\"btn btn-sm btn-default ${active.maybe}\">\r\n        [[calendar:response_maybe]]\r\n      </button>\r\n      <button data-value=\"yes\" type=\"button\" class=\"btn btn-sm btn-success ${active.yes}\">\r\n        [[calendar:response_yes]]\r\n      </button>\r\n        `;\r\n      })()}\r\n    </div>\r\n    `}\r\n    <div class=\"panel-group plugin-calendar-event-responses-lists\" data-loaded=\"false\">\r\n      <div class=\"panel panel-default closed\">\r\n        <div class=\"panel-heading\">\r\n          <a role=\"button\" data-toggle=\"collapse\" href=\"#\"\r\n          class=\"btn btn-sm btn-info\" aria-expanded=\"true\">\r\n            <i class=\"fa fa-chevron-down pull-right\"></i>\r\n            [[calendar:response_yes]]\r\n          </a>\r\n        </div>\r\n        <div class=\"panel-collapse\">\r\n          <div class=\"panel-body\">\r\n            <ul class=\"plugin-calendar-event-responses-list-yes\">\r\n              <!-- yes responses go here -->\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"panel panel-default closed\">\r\n        <div class=\"panel-heading\">\r\n          <a role=\"button\" data-toggle=\"collapse\" href=\"#\"\r\n          class=\"btn btn-sm btn-link\" aria-expanded=\"true\">\r\n            <i class=\"fa fa-chevron-down pull-right\"></i>\r\n            [[calendar:response_maybe]]\r\n          </a>\r\n        </div>\r\n        <div class=\"panel-collapse\">\r\n          <div class=\"panel-body\">\r\n            <ul class=\"plugin-calendar-event-responses-list-maybe\">\r\n              <!-- maybe responses go here -->\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"panel panel-default closed\">\r\n        <div class=\"panel-heading\">\r\n          <a role=\"button\" data-toggle=\"collapse\" href=\"#\"\r\n          class=\"btn btn-sm btn-warning\" aria-expanded=\"true\">\r\n            <i class=\"fa fa-chevron-down pull-right\"></i>\r\n            [[calendar:response_no]]\r\n          </a>\r\n        </div>\r\n        <div class=\"panel-collapse\">\r\n          <div class=\"panel-body\">\r\n            <ul class=\"plugin-calendar-event-responses-list-no\">\r\n              <!-- no responses go here -->\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>`;\r\n  const responses = isEmail ? `\r\n  <div class=\"plugin-calendar-event-responses\">\r\n    <i class=\"fa fa-reply\" aria-hidden=\"true\"></i>\r\n    [[calendar:you_responded, [[calendar:response_${response}]]]]\r\n  </div>\r\n  ` : responsesTemplate();\r\n\r\n  const html = `\r\n<div class=\"plugin-calendar-event panel panel-success\" data-translated=\"false\">\r\n  <div class=\"plugin-calendar-event-name panel-heading\">\r\n    ${event.name}\r\n  </div>\r\n  <div class=\"panel-body\">\r\n    <div class=\"plugin-calendar-event-date\">\r\n      <i class=\"fa fa-clock-o\" aria-hidden=\"true\"></i>\r\n      <a\r\n        title=\"[[moment:time-date-view, utc, ${startDate}, ${endDate}, ${allday}]] UTC\"\r\n        class=\"plugin-calendar-time-date-view\"\r\n      >[[moment:time-date-view, local, ${startDate}, ${endDate}, ${allday}]]</a>\r\n    </div>\r\n    ${event.location.length ? `\r\n    <div class=\"plugin-calendar-event-location\">\r\n      <i class=\"fa fa-location-arrow\" aria-hidden=\"true\"></i>\r\n      <span>${event.location}<span>\r\n    </div>\r\n    ` : ''}\r\n    ${event.description.length ? `\r\n    <div class=\"plugin-calendar-event-description\">\r\n      <i class=\"fa fa-info-circle\" aria-hidden=\"true\"></i>\r\n      <div>${event.description}</div>\r\n    </div>\r\n    ` : ''}\r\n    ${event.reminders.length ? `\r\n    <div class=\"plugin-calendar-event-reminders\">\r\n      <i class=\"fa fa-bell\" aria-hidden=\"true\"></i>\r\n      <ul>\r\n        ${event.reminders\r\n          .sort((a, b) => a - b)\r\n          .map(makeListElement).join('\\n')}\r\n      </ul>\r\n    </div>\r\n    ` : ''}\r\n    ${(() => {\r\n      if (event.repeats) {\r\n        const key = ['day', 'week', 'month', 'year'].find(x => event.repeats.every[x]);\r\n        if (key) {\r\n          return `<div class=\"plugin-calendar-event-repeats\">\r\n            <i class=\"fa fa-repeat\" aria-hidden=\"true\"></i>\r\n            <span>[[calendar:every_${key}]]</span>\r\n          </div>`;\r\n        }\r\n        if (event.repeats.every.daysOfWeek) {\r\n          const days = event.repeats.every.daysOfWeek\r\n            .map(day => `[[moment:locale-data, _weekdaysShort, ${day}]]`)\r\n            .join(', ');\r\n          const endDateText = `[[moment:time-date-view, utc, ${event.repeats.endDate}, ` +\r\n            `${event.repeats.endDate}, true]]`;\r\n          return `<div class=\"plugin-calendar-event-repeats\">\r\n            <i class=\"fa fa-repeat\" aria-hidden=\"true\"></i>\r\n            <span>\r\n              ${Number.isFinite(event.repeats.endDate) ? `\r\n              [[calendar:repeats_weekly_on_until, ${endDateText}]] ${days}\r\n              ` : `\r\n              [[calendar:repeats_weekly_on_forever]] ${days}\r\n              `}\r\n            </span>\r\n          </div>`;\r\n        }\r\n      }\r\n      return '';\r\n    })()}\r\n    ${event.mandatory ? `\r\n    <div class=\"plugin-calendar-event-mandatory\">\r\n      <i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>\r\n      <span>[[calendar:mandatory]]</span>\r\n    </div>\r\n    ` : responses}\r\n  </div>\r\n</div>`;\r\n\r\n  return html;\r\n};\r\n\r\nexport { eventTemplate };\r\n"]}